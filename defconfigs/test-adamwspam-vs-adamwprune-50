#
# Test AdamWSPAM vs AdamWPrune at 50% sparsity
# Simple test with LeNet-5 for quick validation
#

# Model Selection - Use LeNet-5 for quick testing
CONFIG_MODEL_MODE_SINGLE=y
CONFIG_MODEL_SELECT_LENET5=y

# Enable test matrix mode to run both optimizers
CONFIG_TEST_MATRIX_MODE=y

# Optimizer Configuration - Only test AdamWSPAM and AdamWPrune
CONFIG_OPTIMIZER_MODE_MULTIPLE=y
CONFIG_OPTIMIZER_ENABLE_ADAMWSPAM=y
CONFIG_OPTIMIZER_ENABLE_ADAMWPRUNE=y
# Disable all other optimizers
CONFIG_OPTIMIZER_ENABLE_SGD=n
CONFIG_OPTIMIZER_ENABLE_ADAM=n
CONFIG_OPTIMIZER_ENABLE_ADAMW=n
CONFIG_OPTIMIZER_ENABLE_ADAMWADV=n

# AdamWPrune specific settings
CONFIG_ADAMWPRUNE_BASE_ADAMWSPAM=y
CONFIG_ADAMWPRUNE_ENABLE_PRUNING=y
CONFIG_ADAMWPRUNE_TARGET_SPARSITY="0.5"
CONFIG_ADAMWPRUNE_PRUNING_METHOD="magnitude"

# SPAM settings (used by both)
CONFIG_SPAM_ENABLE_CLIP=y
CONFIG_SPAM_SPIKE_THRESHOLD="2.0"
CONFIG_SPAM_THETA="50.0"

# Pruning - Only magnitude at 50% sparsity
CONFIG_PRUNING_MODE_SINGLE=y
CONFIG_PRUNING_METHOD="magnitude"
CONFIG_PRUNING_ENABLE_MAGNITUDE=y
CONFIG_PRUNING_ENABLE_NONE=n
CONFIG_PRUNING_ENABLE_MOVEMENT=n
CONFIG_PRUNING_ENABLE_STATE=n

# Only 50% sparsity
CONFIG_SPARSITY_ENABLE_50=y
CONFIG_SPARSITY_ENABLE_70=n
CONFIG_SPARSITY_ENABLE_90=n
CONFIG_SPARSITY_ENABLE_95=n
CONFIG_SPARSITY_ENABLE_99=n

# Quick training settings
CONFIG_BATCH_SIZE=128
CONFIG_NUM_EPOCHS=5
CONFIG_LEARNING_RATE="0.001"