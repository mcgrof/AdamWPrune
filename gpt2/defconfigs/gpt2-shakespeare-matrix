# GPT-2 on Shakespeare dataset
CONFIG_MODEL_MODE_SINGLE=y
CONFIG_MODEL_SELECT_GPT2=y
CONFIG_MODEL_GPT2=y
CONFIG_MODEL="gpt2"

# GPT-2 Configuration
CONFIG_GPT2_MODEL_124M=y
CONFIG_GPT2_MODEL_NAME="gpt2"
CONFIG_GPT2_DATASET_SHAKESPEARE=y
CONFIG_GPT2_DATASET_NAME="shakespeare"
CONFIG_GPT2_BLOCK_SIZE=256
CONFIG_GPT2_GRADIENT_ACCUMULATION=4
CONFIG_GPT2_EVAL_INTERVAL=100
CONFIG_GPT2_EVAL_SAMPLES=200
CONFIG_GPT2_WARMUP_STEPS=100
CONFIG_GPT2_DECAY_LR=y
CONFIG_GPT2_MIN_LR="6e-5"
CONFIG_GPT2_DROPOUT="0.1"
CONFIG_GPT2_FLASH_ATTENTION=y
CONFIG_GPT2_COMPILE=y
CONFIG_GPT2_WEIGHT_TYING=y
CONFIG_GPT2_BIAS=y

# Training parameters
CONFIG_BATCH_SIZE=64  # Optimized for 24GB+ GPUs
CONFIG_NUM_EPOCHS=1
CONFIG_LEARNING_RATE="6e-4"
CONFIG_WEIGHT_DECAY="0.1"
CONFIG_NUM_WORKERS=4
CONFIG_DEVICE="cuda"

# Optimizer - Multiple for testing
CONFIG_OPTIMIZER_MODE_MULTIPLE=y

# A/B Testing: AdamWSpam (no pruning) vs AdamWPrune (50% state pruning)
# Enable only the optimizers we want to compare
CONFIG_OPTIMIZER_ENABLE_ADAMWSPAM=y
CONFIG_OPTIMIZER_ENABLE_ADAMWPRUNE=y

# Pruning configuration for A/B test
CONFIG_PRUNING_MODE_MULTIPLE=y

# Enable pruning methods for comparison
CONFIG_PRUNING_ENABLE_NONE=y  # For AdamWSpam baseline
CONFIG_PRUNING_ENABLE_STATE=y  # For AdamWPrune

# Only test 50% sparsity for focused comparison
CONFIG_SPARSITY_ENABLE_50=y
# CONFIG_SPARSITY_ENABLE_70 is not set
# CONFIG_SPARSITY_ENABLE_90 is not set

# AdamWPrune specific settings
CONFIG_ADAMWPRUNE_BASE_ADAMW=y
CONFIG_ADAMWPRUNE_BASE_OPTIMIZER_NAME="adamw"
CONFIG_ADAMWPRUNE_ENABLE_PRUNING=y
CONFIG_ADAMWPRUNE_TARGET_SPARSITY="0.5"
CONFIG_ADAMWPRUNE_WARMUP_STEPS=1000
CONFIG_ADAMWPRUNE_FREQUENCY=50
CONFIG_ADAMWPRUNE_RAMP_END_EPOCH=8
CONFIG_ADAMWPRUNE_BETA1="0.9"
CONFIG_ADAMWPRUNE_BETA2="0.999"
CONFIG_ADAMWPRUNE_WEIGHT_DECAY="0.1"
CONFIG_ADAMWPRUNE_AMSGRAD=y

# Test matrix configuration
CONFIG_TEST_MATRIX_MODE=y
CONFIG_AUTO_GENERATE_GRAPHS=y
CONFIG_PARALLEL_JOBS=1

# Advanced options
CONFIG_COMPILE_MODEL=y
CONFIG_MIXED_PRECISION=y
CONFIG_GPU_WARMUP=y
CONFIG_SAVE_CHECKPOINT=y
